51??????????C????
?????51???,?????????, ???????????????????,??????????,????KEIL?????,??????,???? ????,????????,?????:

??????????0  ???1 ??????while???????????

#include
typedef unsigned int uint;
typedef unsigned char uchar;
sbit pwm=P0^3;//??PWM??
uint pwm_value=1500;//???1.5ms

uint value[]={1500,1000,1500,2000,1500};//
void delay_ms(uint x)
{
	uint i;
	while(x--)for(i=0;i<125;i++);
}
void InitTimer(void)
{
	TMOD=0x11;//????0,1
	TH0=-20000/256;//??20MS,20MS?????
	TL0=-20000%256;
	TH1=-1500/256;//??1.5MS,??????0?
	TL1=-1500%256;
	EA=1;//???
	TR0=1;//????0
	ET0=1;
	TR1=1;//????1
	ET1=1;
}
void timer0(void) interrupt 1//???0????
{
	pwm=1;
	TH0=-20000/256;
	TL0=-20000%256;
	TR1=1;
}

void timer1(void) interrupt 3//???1????
{
	pwm=0;
	TH1=-pwm_value/256;
	TL1=-pwm_value%256;
	TR1=0;
}
void main(void)//???
{
	uchar i;
	InitTimer();
	pwm_value=1500;
	while(1)
	{
		for(i=0;i<5;i++)
		{
			pwm_value=value[i];//???????????????
			delay_ms(1000);
		}
	}
}
